<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Occident - Polar Sound 2026: Add-ons</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
    :root {
      --color-primary: #0079ca;
      --color-primary-weak: #E6F4FF;
      --color-text: #031419;
      --color-text-secondary: #536b75;
      --color-border: #E6EAEE;
      --color-bg: #ffffff;
      --color-bg-neutral: #F5F7F9;
      --font: 'Montserrat', sans-serif;
    }
    html { scroll-behavior: smooth; -webkit-tap-highlight-color: transparent; }
    body { font-family:var(--font); background:var(--color-bg-neutral); display:flex; justify-content:center; color:var(--color-text); overflow-x:hidden; }
    .phone { width:393px; max-width:100vw; background:var(--color-bg); min-height:100vh; position:relative; padding-bottom:80px; }

    .sticky-header { position:sticky; top:0; z-index:100; background:#fff; }
    .navbar { display:flex; align-items:center; justify-content:space-between; padding:10px 16px; background:#fff; border-bottom:1px solid #e6eaee; }
    .navbar .logo-link { text-decoration:none; display:flex; align-items:center; }
    .navbar .logo-link img { height:38px; width:auto; display:block; object-fit:contain; }
    .nav-icons { display:flex; align-items:center; gap:16px; }
    .nav-icon-btn { margin:0; padding:0; border:none; background:none; display:inline-flex; align-items:center; justify-content:center; cursor:pointer; text-decoration:none; color:inherit; }
    .nav-icon-btn svg { width:24px; height:24px; color:var(--color-text); }
    .avatar-wrap { position:relative; display:flex; align-items:center; }
    .avatar-wrap img { width:24px; height:24px; border-radius:50%; object-fit:cover; }
    .avatar-wrap::after { content:''; position:absolute; top:-1px; right:-1px; width:8px; height:8px; background:#22ad5c; border:1.5px solid white; border-radius:50%; }
    .nav-cart-link { display:none; }

    /* Flow stepper */
    .flow-stepper { display:flex; align-items:flex-start; justify-content:space-between; padding:12px 16px; background:#fff; border-bottom:1px solid var(--color-border); }
    .flow-stepper .step { display:flex; flex-direction:column; align-items:center; gap:4px; flex:1; position:relative; }
    .flow-stepper .step::after { content:''; position:absolute; top:9px; left:50%; width:100%; height:2px; background:#ccd2d8; z-index:0; }
    .flow-stepper .step:last-child::after { display:none; }
    .flow-stepper .step.done::after { background:#0089e3; }
    .flow-stepper .step.current::after { background:#ccd2d8; }
    .flow-stepper .step .dot { width:20px; height:20px; border-radius:50%; border:2px solid #ccd2d8; background:#fff; display:flex; align-items:center; justify-content:center; z-index:1; position:relative; font-size:0; color:transparent; box-sizing:border-box; }
    .flow-stepper .step.done .dot { border-color:#0089e3; background:#fff; }
    .flow-stepper .step.done .dot::before { content:''; display:block; width:10px; height:7px; background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 11 8' fill='none'%3E%3Cpath d='M1 3.5L4 6.5L10 1' stroke='%230089e3' stroke-width='1.8' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E") center/contain no-repeat; }
    .flow-stepper .step.current .dot { border-color:#0089e3; background:#fff; }
    .flow-stepper .step.current .dot::before { content:''; display:block; width:10px; height:10px; border-radius:50%; background:#0089e3; }
    .flow-stepper .step .label { font-family:var(--font); font-size:12px; font-weight:600; line-height:16px; color:#a7b2ba; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:100%; }
    .flow-stepper .step.done .label { color:#536b75; }
    .flow-stepper .step.current .label { color:#536b75; }
    .flow-stepper a.step { text-decoration:none; color:inherit; cursor:pointer; }

    /* Page content */
    .page-title { padding:24px 16px 8px; }
    .page-title h1 { font-size:20px; font-weight:700; line-height:28px; }
    .page-title p { font-size:14px; color:var(--color-text-secondary); line-height:20px; margin-top:4px; }

    /* Add-on cards */
    .addon-cards { padding:16px; display:flex; flex-direction:column; gap:16px; }
    .addon-card { display:flex; border:2px solid var(--color-border); border-radius:12px; overflow:hidden; text-decoration:none; color:inherit; background:#fff; transition:border-color 0.2s, box-shadow 0.2s; cursor:pointer; position:relative; }
    .addon-card:hover { border-color:var(--color-primary); box-shadow:0 2px 12px rgba(0,121,202,0.12); }
    .addon-card.has-items { border-color:#22ad5c; }
    .addon-card-img { width:120px; flex-shrink:0; overflow:hidden; }
    .addon-card-img img { width:100%; height:100%; object-fit:cover; display:block; min-height:140px; }
    .addon-card-body { flex:1; padding:14px 16px; display:flex; flex-direction:column; gap:6px; }
    .addon-card-body h3 { font-size:16px; font-weight:700; line-height:22px; }
    .addon-card-body p { font-size:13px; color:var(--color-text-secondary); line-height:18px; }
    .addon-card-body .addon-price { font-size:14px; font-weight:600; color:var(--color-text); margin-top:auto; }
    .addon-card-body .addon-price span { font-size:12px; font-weight:400; color:var(--color-text-secondary); }
    .addon-badge { display:inline-flex; align-items:center; gap:4px; background:#e8f8ef; color:#15803d; font-size:12px; font-weight:600; padding:4px 10px; border-radius:100px; margin-top:4px; }
    .addon-badge svg { width:14px; height:14px; }
    .addon-card-arrow { position:absolute; right:14px; top:50%; transform:translateY(-50%); width:24px; height:24px; color:#a7b2ba; }

    /* Sticky CTA */
    .sticky-cta { position:fixed; bottom:0; width:393px; max-width:100vw; z-index:200; background:transparent; padding:12px 16px; }
    .sticky-cta .cta-btn { width:100%; height:48px; background:#0079ca; border:2px solid transparent; border-radius:64px; color:#fff; font-family:var(--font); font-weight:600; font-size:16px; line-height:24px; cursor:pointer; transition:background 0.2s; outline:none; }
    .sticky-cta .cta-btn:hover { background:#0066b3; }

    /* Footer */
    .footer { background:#031419; color:white; padding:32px 16px 80px; }
    .footer-cols { display:flex; justify-content:space-between; margin-bottom:24px; }
    .footer-col h5 { font-size:14px; font-weight:600; margin-bottom:8px; }
    .footer-col ul { list-style:none; }
    .footer-col ul li { font-size:13px; line-height:20px; margin-bottom:4px; color:rgba(255,255,255,0.75); }
    .footer .legal { border-top:1px solid rgba(255,255,255,0.15); padding-top:16px; font-size:12px; color:rgba(255,255,255,0.5); }
    .footer .legal a { color:white; }

    @media (max-width:393px) { .phone { width:100vw; } .sticky-cta { width:100vw; } }
  </style>
</head>
<body>
  <div class="phone">
    <header class="sticky-header">
      <nav class="navbar">
        <a href="home.html" class="logo-link" id="nav-logo-link"><img src="img/fever-logo.png" alt="Fever"></a>
        <div class="nav-icons">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><circle cx="10.5" cy="10.5" r="7"/><line x1="15.5" y1="15.5" x2="22" y2="22"/></svg>
          <a class="nav-icon-btn" href="favorites.html" aria-label="Favorites"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg></a>
          <a class="nav-icon-btn nav-cart-link" id="nav-cart-link" href="cart.html" aria-label="Cart"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 01-8 0"/></svg></a>
          <a class="avatar-wrap" href="profile.html" aria-label="Profile"><img src="https://www.figma.com/api/mcp/asset/541291f3-2b10-4d67-b843-70a0add86fab" alt="Profile"></a>
          <a class="nav-icon-btn" href="home.html" aria-label="Menu"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg></a>
        </div>
      </nav>
      <div class="flow-stepper" id="flow-stepper"></div>
    </header>

    <div class="page-title">
      <h1>Choose your add-ons</h1>
      <p>Enhance your Polar Sound Festival experience</p>
    </div>

    <div class="addon-cards">
      <a class="addon-card" id="card-accommodation" href="polar-sound-accommodation.html">
        <div class="addon-card-img">
          <img src="img/baqueira-hotel.png" alt="Accommodation">
        </div>
        <div class="addon-card-body">
          <h3>Accommodation</h3>
          <p>Stay near the festival with premium hotel options in Baqueira Beret</p>
          <div class="addon-price"><span>From</span> &euro;559.70</div>
          <div class="addon-badge" id="badge-accommodation" style="display:none">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
            <span id="badge-accommodation-text">Added</span>
          </div>
        </div>
        <svg class="addon-card-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg>
      </a>

      <a class="addon-card" id="card-transportation" href="polar-sound-transportations.html">
        <div class="addon-card-img">
          <img src="img/polar-sound-hero.png" alt="Transportation">
        </div>
        <div class="addon-card-body">
          <h3>Transportation</h3>
          <p>Round-trip transport to Baqueira Beret from main cities</p>
          <div class="addon-price"><span>From</span> &euro;19.00</div>
          <div class="addon-badge" id="badge-transportation" style="display:none">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
            <span id="badge-transportation-text">Added</span>
          </div>
        </div>
        <svg class="addon-card-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg>
      </a>
    </div>

    <div class="footer">
      <div class="footer-cols">
        <div class="footer-col"><h5>Fever</h5><ul><li>About us</li><li>Blog</li><li>Careers</li></ul></div>
        <div class="footer-col"><h5>Help</h5><ul><li>FAQ</li><li>Contact</li></ul></div>
        <div class="footer-col"><h5>Legal</h5><ul><li>Privacy</li><li>Terms</li></ul></div>
      </div>
      <div class="legal">Fever &copy; 2026. All rights reserved.</div>
    </div>

    <div class="sticky-cta">
      <button class="cta-btn" id="sticky-btn">Skip add-ons</button>
    </div>
  </div>

  <script src="js/burger-menu.js"></script>
  <script>
    const params = new URLSearchParams(window.location.search);
    let flow = params.get('flow');
    let storedFlow = null;
    try { storedFlow = sessionStorage.getItem('polar_flow_mode'); } catch (e) {}
    if (!flow && (storedFlow === 'f1' || storedFlow === 'f2')) flow = storedFlow;
    const isF1 = flow === 'f1';
    const isF2 = flow === 'f2';
    const isProductListFlow = isF1 || isF2;

    if (isProductListFlow) {
      try { sessionStorage.setItem('polar_flow_mode', flow); } catch (e) {}
    }

    // Logo link
    var logoLink = document.getElementById('nav-logo-link');
    if (logoLink && isProductListFlow) logoLink.href = flow + '/';

    // Cart icon (only for f2)
    if (isF2) {
      var cartLink = document.getElementById('nav-cart-link');
      if (cartLink) { cartLink.style.display = ''; cartLink.href = 'cart.html?flow=f2'; }
    }

    // Build stepper
    var stepperEl = document.getElementById('flow-stepper');
    if (stepperEl) {
      var html = '<a href="polar-sound.html?flow=' + flow + '#ticket-section" class="step done"><span class="dot"></span><span class="label">Tickets</span></a>';
      html += '<div class="step current"><span class="dot"></span><span class="label">Add-ons</span></div>';
      if (isF2) {
        html += '<div class="step"><span class="dot"></span><span class="label">Cart</span></div>';
      }
      html += '<div class="step"><span class="dot"></span><span class="label">Checkout</span></div>';
      stepperEl.innerHTML = html;
    }

    // Update card links with flow param
    var cardAccom = document.getElementById('card-accommodation');
    var cardTransport = document.getElementById('card-transportation');
    if (cardAccom) cardAccom.href = 'polar-sound-accommodation.html?flow=' + flow;
    if (cardTransport) cardTransport.href = 'polar-sound-transportations.html?flow=' + flow;

    // Read cart state and update badges
    function updateBadges() {
      try {
        var accom = JSON.parse(localStorage.getItem('cart_accommodation') || '[]');
        var transport = JSON.parse(localStorage.getItem('cart_transportation') || '[]');
        var accomItems = accom.filter(function(t) { return (t.qty || 0) > 0; });
        var transportItems = transport.filter(function(t) { return (t.qty || 0) > 0; });

        var badgeAccom = document.getElementById('badge-accommodation');
        var badgeAccomText = document.getElementById('badge-accommodation-text');
        var cardAccomEl = document.getElementById('card-accommodation');
        if (accomItems.length > 0 && badgeAccom) {
          var totalRooms = accomItems.reduce(function(s, t) { return s + (t.qty || 0); }, 0);
          badgeAccom.style.display = '';
          badgeAccomText.textContent = totalRooms + (totalRooms === 1 ? ' room added' : ' rooms added');
          if (cardAccomEl) cardAccomEl.classList.add('has-items');
        }

        var badgeTransport = document.getElementById('badge-transportation');
        var badgeTransportText = document.getElementById('badge-transportation-text');
        var cardTransportEl = document.getElementById('card-transportation');
        if (transportItems.length > 0 && badgeTransport) {
          var totalTickets = transportItems.reduce(function(s, t) { return s + (t.qty || 0); }, 0);
          badgeTransport.style.display = '';
          badgeTransportText.textContent = totalTickets + (totalTickets === 1 ? ' ticket added' : ' tickets added');
          if (cardTransportEl) cardTransportEl.classList.add('has-items');
        }

        var hasAny = accomItems.length > 0 || transportItems.length > 0;
        var btn = document.getElementById('sticky-btn');
        if (btn) {
          btn.textContent = hasAny ? (isF2 ? 'Continue to cart' : 'Continue to checkout') : 'Skip add-ons';
        }
      } catch (e) {}
    }
    updateBadges();

    // CTA button
    document.getElementById('sticky-btn').addEventListener('click', function() {
      if (isF2) {
        window.location.href = 'cart.html?flow=f2';
      } else {
        window.location.href = 'checkout.html?flow=f1';
      }
    });
  </script>
</body>
</html>
