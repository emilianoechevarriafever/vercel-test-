<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" type="image/png" sizes="32x32" href="./favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./favicons/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="./favicons/apple-touch-icon.png">
  <link rel="shortcut icon" href="./favicon.ico">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout | Fever</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
    :root {
      --color-primary: #0079ca;
      --color-primary-weak: #E6F4FF;
      --color-text: #031419;
      --color-text-subtle: #536b75;
      --color-border: #ccd2d8;
      --color-bg: #ffffff;
      --color-bg-neutral: #f2f3f3;
      --font: 'Montserrat', sans-serif;
      --color-input-border: #CCD2D8;
      --color-input-border-focus: var(--color-primary);
      --color-input-border-error: #EB0052;
      --color-input-bg-disabled: #F2F3F3;
      --color-input-border-disabled: #F2F3F3;
      --color-input-text-disabled: #A7B2BA;
      --color-input-error-text: #EB0052;
      --color-input-focus-ring: 0 0 0 4px var(--color-primary-weak);
    }
    html { scroll-behavior: smooth; -webkit-tap-highlight-color: transparent; }
    body { font-family:var(--font); background:var(--color-bg-neutral); display:flex; justify-content:center; color:var(--color-text); overflow-x:hidden; }
    .phone { width:393px; max-width:100vw; background:var(--color-bg); min-height:100vh; position:relative; padding-bottom:120px; }

    .sticky-header { position:sticky; top:0; z-index:100; background:#fff; }
    .checkout-topbar { display:flex; align-items:center; padding:14px 16px; background:#fff; border-bottom:1px solid var(--color-border); }
    .checkout-topbar .back-chevron { display:inline-flex; align-items:center; justify-content:center; color:var(--color-text); text-decoration:none; flex-shrink:0; }
    .checkout-topbar .back-chevron svg { width:22px; height:22px; }
    .checkout-topbar .topbar-title { flex:1; text-align:center; font-size:16px; font-weight: 600; line-height:24px; margin-right:22px; }

    .event-summary { display:flex; gap:12px; padding:16px; align-items:center; border-bottom:1px solid var(--color-border); }
    .event-summary .event-thumb { width:56px; height:56px; border-radius:8px; overflow:hidden; flex-shrink:0; }
    .event-summary .event-thumb img { width:100%; height:100%; object-fit:cover; }
    .event-summary .event-info { flex:1; }
    .event-summary .event-name { font-size:14px; font-weight:600; line-height:20px; margin-bottom:2px; }
    .event-summary .event-venue { font-size:12px; color:var(--color-text-subtle); display:flex; align-items:center; gap:4px; }
    .event-summary .event-venue svg { width:12px; height:12px; flex-shrink:0; }

    .checkout-section { padding:0 16px; }
    .checkout-section h3 { font-size:16px; font-weight: 600; margin-bottom:12px; }

    .date-row { padding:16px; border-bottom:1px solid var(--color-border); }
    .date-row .label { font-size:14px; font-weight: 600; color:#0079ca; margin-bottom:4px; }
    .date-row .value { font-size:14px; color:var(--color-text); }

    .ticket-summary-row { display:flex; justify-content:space-between; align-items:center; padding:6px 0; }
    .ticket-summary-row .ticket-label { font-size:14px; color:var(--color-text); }
    .ticket-summary-row .ticket-val { font-size:14px; font-weight:500; text-align:right; }

    .price-details { padding:16px; border-bottom:1px solid var(--color-border); }
    .price-details h3 { font-size:16px; font-weight: 600; margin-bottom:12px; }
    .price-row { display:flex; justify-content:space-between; padding:6px 0; font-size:14px; }
    .price-row .price-label { color:var(--color-text); }
    .price-row .price-val { font-weight:500; }
    .price-row.total { border-top:1px solid var(--color-border); margin-top:8px; padding-top:12px; font-weight: 600; font-size:16px; }

    .sticky-pay { position:fixed; bottom:0; width:393px; max-width:100vw; z-index:200; background:transparent; padding:12px 16px; pointer-events:none; }
    .sticky-pay .pay-btn { pointer-events:auto; }
    .sticky-pay .pay-btn { display:block; width:100%; height:48px; background:#0079ca; border:2px solid transparent; border-radius:64px; color:#fff; font-family:var(--font); font-weight:600; font-size:16px; line-height:24px; cursor:pointer; transition:background 0.2s, border-color 0.2s, box-shadow 0.2s, color 0.2s; outline:none; }
    .sticky-pay .pay-btn:hover { background:#0079ca; }
    .sticky-pay .pay-btn:focus-visible { border-color:#005795; box-shadow:0 0 0 4px rgba(0,121,202,0.32); }
    .sticky-pay .pay-btn:active { background:#0079ca; }
    .sticky-pay .pay-btn:disabled, .sticky-pay .pay-btn.disabled { background:#f2f3f3; color:#a7b2ba; border-color:transparent; box-shadow:none; cursor:default; }
    /* Payment-method branded states â€” Figma ignt.comp.actions / payment button */
    .sticky-pay .pay-btn.method-apple { background:#06232c; }
    .sticky-pay .pay-btn.method-apple:hover { background:#0a3340; }
    .sticky-pay .pay-btn.method-apple:focus-visible { border-color:#f2f3f3; box-shadow:0 0 0 4px rgba(0,121,202,0.32); }
    .sticky-pay .pay-btn.method-apple:active { background:#031419; }
    .sticky-pay .pay-btn.method-paypal { background:#0070ba; }
    .sticky-pay .pay-btn.method-paypal:hover { background:#006ab1; }
    .sticky-pay .pay-btn.method-paypal:focus-visible { border-color:#0000a6; box-shadow:0 0 0 4px rgba(0,121,202,0.32); }
    .sticky-pay .pay-btn.method-paypal:active { background:#005a96; }
    .alt-payment { display:flex; align-items:center; gap:12px; padding:12px 0; border-top:1px solid var(--color-border); cursor:pointer; }
    .alt-payment .radio-empty { width:18px; height:18px; border-radius:50%; border:2px solid var(--color-border); flex-shrink:0; }
    .alt-payment .radio-empty.active { border-color:#0079ca; background:#0079ca; }
    .alt-payment .radio-empty.active::after { content:''; display:block; width:6px; height:6px; background:white; border-radius:50%; margin:auto; }
    .alt-payment .pay-info { flex:1; }
    .alt-payment .pay-name { font-size:14px; font-weight:500; }
    .alt-payment .pay-sub { font-size:12px; color:var(--color-text-subtle); margin-top:2px; }

    .payment-section { padding:16px; }
    .payment-section h3 { font-size:16px; font-weight: 600; margin-bottom:16px; }
    .card-type-row { display:flex; align-items:center; gap:12px; padding:12px 0; border-bottom:1px solid var(--color-border); margin-bottom:16px; cursor:pointer; }
    .card-type-row .radio { width:18px; height:18px; border-radius:50%; border:2px solid var(--color-border); display:flex; align-items:center; justify-content:center; flex-shrink:0; }
    .card-type-row .radio.active { border-color:#0079ca; background:#0079ca; }
    .card-type-row .radio.active::after { content:''; width:6px; height:6px; background:white; border-radius:50%; }
    .card-type-row svg { width:18px; height:18px; color:var(--color-text); }
    .card-type-row .label { font-size:14px; font-weight:500; flex:1; }
    .card-brands { display:flex; align-items:center; gap:8px; }
    .card-brands .brand-logo { display:inline-flex; align-items:center; justify-content:center; width:40px; height:28px; border:1px solid var(--color-border); border-radius:4px; padding:3px; flex-shrink:0; }
    .card-brands .brand-logo svg { width:100%; height:100%; }

    .form-group { margin-bottom:16px; }
    .form-group .field-label { display:block; font-size:12px; font-weight:600; line-height:16px; color:var(--color-text); margin-bottom:8px; }
    .form-group .form-field { width:100%; height:48px; border:1px solid var(--color-input-border); border-radius:8px; padding:0 16px; font-family:var(--font); font-size:16px; color:var(--color-text); background:#fff; outline:none; transition:border-color 0.15s, box-shadow 0.15s; }
    .form-group .form-field::placeholder { color:var(--color-text-subtle); }
    .form-group .form-field:focus { border-color:var(--color-input-border-focus); box-shadow:var(--color-input-focus-ring); }
    .form-row { display:flex; gap:12px; }
    .form-row .form-group { flex:1; }

    .security-note { display:flex; align-items:center; gap:8px; padding:8px 0; font-size:12px; color:var(--color-text-subtle); }
    .security-note svg { width:14px; height:14px; flex-shrink:0; }

    .checkbox-area { padding:16px 0; }
    .checkbox-row { display:flex; align-items:flex-start; gap:8px; margin-bottom:12px; }
    .checkbox-row .cb { width:18px; height:18px; border-radius:4px; border:2px solid var(--color-border); flex-shrink:0; margin-top:1px; display:flex; align-items:center; justify-content:center; cursor:pointer; }
    .checkbox-row .cb.checked { background:#0079ca; border-color:#0079ca; }
    .checkbox-row .cb.checked::after { content:'\2713'; color:white; font-size:12px; font-weight: 600; }
    .checkbox-row .cb-label { font-size:14px; line-height:18px; color:var(--color-text); }
    .checkbox-row .cb-label a { color:#0079ca; }

    .legal-links { padding:8px 0 24px; }
    .legal-links a { display:block; font-size:14px; color:#0079ca; margin-bottom:8px; text-decoration:none; }



    @media (max-width:393px) { .phone { width:100vw; } .sticky-pay { width:100vw; } }
    /* Focus-visible & active polish */
    button:focus-visible, a:focus-visible { outline: 2px solid #0079ca; outline-offset: 2px; }
    .form-group .input-wrap .form-field:focus-visible { border-color:var(--color-input-border-focus); box-shadow:var(--color-input-focus-ring); }
    .card-type-row:active { opacity: 0.85; }
    .alt-payment:active { opacity: 0.85; }
    .checkbox-row .cb:active { transform: scale(0.9); }
    .nav-icon-btn:active { opacity: 0.6; }
  </style>
</head>
<body>
  <div class="phone">
    <header class="sticky-header">
      <div class="checkout-topbar">
        <a class="back-chevron" href="javascript:history.back()" aria-label="Go back">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
        </a>
        <span class="topbar-title">Confirm and pay</span>
      </div>
    </header>

    <div class="event-summary">
      <div class="event-thumb"><img id="event-thumb" src="" alt=""></div>
      <div class="event-info">
        <div class="event-name" id="event-name"></div>
        <div class="event-venue">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/><circle cx="12" cy="9" r="2.5"/></svg>
          <span id="event-venue-name"></span>
        </div>
      </div>
    </div>

    <div class="date-row">
      <div class="label">Date</div>
      <div class="value" id="event-date"></div>
    </div>

    <div class="checkout-section" style="padding-top:16px;">
      <h3>Your tickets</h3>
      <div id="ticket-items"></div>
    </div>

    <div class="price-details">
      <h3>Price details</h3>
      <div class="price-row"><span class="price-label">Subtotal</span><span class="price-val" id="subtotal-val">&euro;0.00</span></div>
      <div class="price-row"><span class="price-label">Fees</span><span class="price-val" id="fees-val">&euro;0.00</span></div>
      <div class="price-row"><span class="price-label">Tax (IVA)</span><span class="price-val" id="tax-val">&euro;0.00</span></div>
      <div class="price-row total"><span class="price-label">Total</span><span class="price-val" id="grand-total">&euro;0.00</span></div>
    </div>

    <div class="payment-section">
      <h3>Payment method</h3>
      <div class="card-type-row">
        <div class="radio active"></div>
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="5" width="20" height="14" rx="2"/><path d="M2 10h20"/></svg>
        <span class="label">New card</span>
        <div class="card-brands">
          <span class="brand-logo" title="Visa"><svg viewBox="0 0 32 22" fill="none"><rect width="32" height="22" rx="3" fill="#1A1F71"/><text x="16" y="14.5" text-anchor="middle" fill="white" font-family="Arial,sans-serif" font-weight="700" font-size="9">VISA</text></svg></span>
          <span class="brand-logo" title="Mastercard"><svg viewBox="0 0 24 16" fill="none"><circle cx="9" cy="8" r="6" fill="#EB001B"/><circle cx="15" cy="8" r="6" fill="#F79E1B"/><path d="M12 4.3a6 6 0 0 1 0 7.4 6 6 0 0 1 0-7.4z" fill="#FF5F00"/></svg></span>
        </div>
      </div>

      <div class="form-group">
        <label class="field-label">Card number</label>
        <input class="form-field" type="text" placeholder="1234 5678 9012 3456" maxlength="19" inputmode="numeric">
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="field-label">Expiry date</label>
          <input class="form-field" type="text" placeholder="MM / YY" maxlength="7" inputmode="numeric">
        </div>
        <div class="form-group">
          <label class="field-label">CVV</label>
          <input class="form-field" type="text" placeholder="123" maxlength="4" inputmode="numeric">
        </div>
      </div>
      <div class="form-group">
        <label class="field-label">Cardholder name</label>
        <input class="form-field" type="text" placeholder="Name on card">
      </div>
      <div class="form-group">
        <label class="field-label">Email</label>
        <input class="form-field" type="email" placeholder="your@email.com">
      </div>

      <div class="security-note">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg>
        Secure payment processed by Stripe
      </div>

      <!-- Apple Pay -->
      <div class="alt-payment" id="apple-pay-row">
        <div class="radio-empty"></div>
        <div class="pay-info">
          <div class="pay-name" style="display:flex;align-items:center;gap:4px;">
            <svg viewBox="0 0 24 24" fill="currentColor" style="width:16px;height:16px;"><path d="M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.48-3.24 0-1.44.62-2.2.44-3.06-.4C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"/></svg>
            Apple Pay
          </div>
        </div>
      </div>

      <!-- PayPal -->
      <div class="alt-payment" id="paypal-row">
        <div class="radio-empty"></div>
        <div class="pay-info">
          <div class="pay-name" style="color:#003087;font-weight: 600;">Pay<span style="color:#009cde">Pal</span></div>
          <div class="pay-sub">Pay in 3 interest-free payments</div>
        </div>
      </div>
    </div>

    <div class="checkout-section">
      <div class="checkbox-area">
        <div class="checkbox-row">
          <div class="cb" id="cb-terms"></div>
          <span class="cb-label">I accept the <a href="javascript:void(0)">Terms of Use</a> and <a href="javascript:void(0)">Privacy Policy</a></span>
        </div>
        <div class="checkbox-row">
          <div class="cb" id="cb-comms"></div>
          <span class="cb-label">I want to receive communications about experiences and promotions from Fever</span>
        </div>
      </div>
      <div class="legal-links">
        <a href="javascript:void(0)">Terms of Use</a>
        <a href="javascript:void(0)">Privacy Policy</a>
        <a href="javascript:void(0)">Cookie Policy</a>
      </div>
    </div>

    <div class="sticky-pay">
      <button class="pay-btn" id="pay-btn">Pay &euro;0.00</button>
    </div>
  </div>

  <script src="js/burger-menu.js"></script>
  <script>
  (function() {
    var data;
    try { data = JSON.parse(localStorage.getItem('plan_checkout')); } catch (e) {}
    if (!data) { window.location.replace('home.html'); return; }

    var slug = new URLSearchParams(window.location.search).get('plan') || data.slug;
    document.title = 'Checkout \u2013 ' + data.title + ' | Fever';
    document.getElementById('event-thumb').src = data.hero;
    document.getElementById('event-name').textContent = data.title;
    document.getElementById('event-venue-name').textContent = data.venue;
    document.getElementById('event-date').textContent = data.date;

    var ticketItemsEl = document.getElementById('ticket-items');
    var subtotal = 0;
    data.items.forEach(function(item) {
      var lineTotal = item.qty * item.price;
      subtotal += lineTotal;
      ticketItemsEl.innerHTML += '<div class="ticket-summary-row"><span class="ticket-label">' + item.qty + 'x ' + item.name + '</span><span class="ticket-val">\u20ac' + lineTotal.toFixed(2) + '</span></div>';
    });

    var fees = Math.round(subtotal * 0.05 * 100) / 100;
    var tax = Math.round(subtotal * 0.21 * 100) / 100;
    var grandTotal = subtotal + fees + tax;

    document.getElementById('subtotal-val').textContent = '\u20ac' + subtotal.toFixed(2);
    document.getElementById('fees-val').textContent = '\u20ac' + fees.toFixed(2);
    document.getElementById('tax-val').textContent = '\u20ac' + tax.toFixed(2);
    document.getElementById('grand-total').textContent = '\u20ac' + grandTotal.toFixed(2);
    document.getElementById('pay-btn').textContent = 'Pay \u20ac' + grandTotal.toFixed(2);

    document.querySelectorAll('.cb').forEach(function(cb) {
      cb.addEventListener('click', function() { cb.classList.toggle('checked'); });
    });

    var payBtn = document.getElementById('pay-btn');
    var cardRow = document.querySelector('.card-type-row');
    var appleRow = document.getElementById('apple-pay-row');
    var paypalRow = document.getElementById('paypal-row');
    var cardFields = document.querySelectorAll('.payment-section .form-group, .payment-section .form-row, .payment-section .security-note');
    var selectedMethod = 'card';

    function formatEur(n) { return '\u20ac' + n.toFixed(2); }

    function refreshPayUI() {
      var cardRadio = cardRow.querySelector('.radio');
      var appleRadio = appleRow.querySelector('.radio-empty');
      var paypalRadio = paypalRow.querySelector('.radio-empty');

      cardRow.classList.toggle('selected', selectedMethod === 'card');
      appleRow.classList.toggle('selected', selectedMethod === 'apple');
      paypalRow.classList.toggle('selected', selectedMethod === 'paypal');
      if (cardRadio) { cardRadio.classList.toggle('active', selectedMethod === 'card'); }
      if (appleRadio) { appleRadio.classList.toggle('active', selectedMethod === 'apple'); }
      if (paypalRadio) { paypalRadio.classList.toggle('active', selectedMethod === 'paypal'); }

      cardFields.forEach(function(el) { el.style.display = selectedMethod === 'card' ? '' : 'none'; });

      var label = selectedMethod === 'apple' ? 'Apple Pay' : selectedMethod === 'paypal' ? 'PayPal' : 'Pay';
      payBtn.textContent = label + ' ' + formatEur(grandTotal);
      payBtn.classList.remove('method-apple', 'method-paypal');
      if (selectedMethod === 'apple') payBtn.classList.add('method-apple');
      else if (selectedMethod === 'paypal') payBtn.classList.add('method-paypal');
    }

    cardRow.addEventListener('click', function() { selectedMethod = 'card'; refreshPayUI(); });
    appleRow.addEventListener('click', function() { selectedMethod = 'apple'; refreshPayUI(); });
    paypalRow.addEventListener('click', function() { selectedMethod = 'paypal'; refreshPayUI(); });
    refreshPayUI();

    payBtn.addEventListener('click', function() {
      alert('Payment simulated! \u20ac' + grandTotal.toFixed(2) + ' for ' + data.title + '. This is a prototype.');
    });
  })();
  </script>
  <script src="js/flow-param.js"></script>
</body>
</html>
